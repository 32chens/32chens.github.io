---
title: MySQL面试题
author: chenlf
tags:
  - 'MySQL,面试题'
categories:
  - '数据库,面试题'
katex: true
abbrlink: d8c61fec
date: 2023-06-05 10:13:58
---

**B树和B+树的不同**

B树每个节点都包含了数据，他没有冗余索引，所以有可能查询的时候直接在根节点查询出来，所以它的查找不够稳定

B+树数据都存储在叶子节点，其他冗余节点存储的是索引值和子节点（数据页）的最小值的地址，因为冗余节点只存储索引地址，所以数据页大小相同，在同高度的树下，B+树会比B树存储更多的数据，同时在叶子节点之间都有指向前后节点的指针方便处理范围查询。

注：Mysql中B+树一个节点默认是16k

**为什么InnoDB表必须建主键，并推荐使用整型自增主键？**

因为InnoDB表不建主键的话，MySQL会尝试自己查找一列没有数据重复的列作为键，如果没有则MySQL自己创建一列隐形id作为主键构建聚集索引，而这些操作都是可以避免的。

选择整型是为了便于比较，比如字符型就需要逐个字符比较，自增是为了避免整理数据页的问题，因为一个节点就是一张数据页，如果现在需要插入一个主键id小于当前页最后一条数据id大于倒数第二条数据id的数据，B+树又必须要是排序好的数据结构，所以就需要将最后一条数据修改移动，而自增就可以只需要在这种情况，新增数据页就好了

**为什么非主键索引结构叶子节点存储的是主键值？**

节省存储空间

**为什么没有按索引的最左前列原理使用条件，不会使用索引查询**

（name， age, position）     select * from tbl where age = 10

因为在构建索引时，要满足排序规则排序，首先是按照name大小排序，name相同按age大小排序，所以排序的时候是按照从左到右的优先级排序的，所以在查询时也是先按name查询，如果没有name条件就没办法使用索引查找了，只能使用全表查找了

**什么是单路排序，双路排序**
